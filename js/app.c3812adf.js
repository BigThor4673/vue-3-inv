(function(e){function t(t){for(var a,c,i=t[0],s=t[1],l=t[2],d=0,b=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(b.length)b.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/vue-3-inv/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"049b":function(e,t,n){},"1ad9":function(e,t,n){"use strict";n("3594")},2993:function(e,t,n){},3594:function(e,t,n){},"3d11":function(e,t,n){"use strict";n("2993")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),r=n("9d64"),o=n.n(r);Object(a["s"])("data-v-30c3f983");var c={id:"app"},i={class:"navbar navbar-expand navbar-dark bg-dark"},s=Object(a["d"])("img",{src:o.a,alt:"Logo"},null,-1),l=Object(a["d"])("span",null,"PLANTITA",-1),u={class:"navbar-nav mr-auto"},d={class:"nav-item"},b=Object(a["e"])("Planta "),p={class:"container"};function m(e,t,n,r,o,m){var f=Object(a["v"])("router-link"),h=Object(a["v"])("router-view");return Object(a["p"])(),Object(a["c"])("div",c,[Object(a["d"])("nav",i,[Object(a["f"])(f,{to:"/",class:"navbar-brand"},{default:Object(a["A"])((function(){return[s,l]})),_:1}),Object(a["d"])("div",u,[Object(a["d"])("li",d,[Object(a["f"])(f,{to:"/planta",class:"nav-link"},{default:Object(a["A"])((function(){return[b]})),_:1})])])]),Object(a["d"])("div",p,[Object(a["f"])(h)])])}Object(a["q"])();var f={name:"app"};n("1ad9");f.render=m,f.__scopeId="data-v-30c3f983";var h=f,g=(n("4989"),n("ab8b"),n("1da1")),v=(n("96cf"),n("6c02")),O=n("f31b"),j=n.n(O),w={class:"card w-100 h-50 mx-auto mt-2 shadow",id:"cardSensores"},x={class:"card-body"},D={class:"container"},y={class:"container"},A={class:"row",id:"planta"},L={class:"col-sm-3 p-0"},S={class:"row"},_={class:"col-md-12 col-6"},k={class:"col-md-12 col-6"},z=Object(a["d"])("div",{class:"col-sm-6"},[Object(a["d"])("img",{src:j.a,class:"rounded mx-auto d-block img-responsive",alt:"Planta"})],-1),E={class:"col-sm-3 pl-0 pr-3"},H={class:"row"},M={class:"col-sm-12 col-4 px-1"},T={class:"col-sm-12 col-4 px-1"},U={class:"col-sm-12 col-4 px-1"};function F(e,t,n,r,o,c){var i=Object(a["v"])("header-planta"),s=Object(a["v"])("indicador-widget"),l=Object(a["v"])("sensor-widget");return Object(a["p"])(),Object(a["c"])("div",w,[Object(a["d"])("div",x,[Object(a["d"])("div",D,[Object(a["f"])(i,{banco:o.plantaData.banco,genetica:o.plantaData.tipo,nombre:o.plantaData.nombre},null,8,["banco","genetica","nombre"])]),Object(a["d"])("div",y,[Object(a["d"])("div",A,[Object(a["d"])("div",L,[Object(a["d"])("div",S,[Object(a["d"])("div",_,[Object(a["f"])(s,{linea1:c.tiempo_luz,linea2:o.sensorLuzFecha,linea3:o.sensorLuz?"ENCENDIDA":"APAGADA",clase:o.sensorLuz?"encendida":"apagada"},null,8,["linea1","linea2","linea3","clase"])]),Object(a["d"])("div",k,[Object(a["f"])(s,{linea1:c.tiempo_edad_planta,linea2:o.plantaData.fecha_germinacion?o.plantaData.fecha_germinacion.toDate().toLocaleDateString():"",linea3:"EDAD",clase:"edad"},null,8,["linea1","linea2"])])])]),z,Object(a["d"])("div",E,[Object(a["d"])("div",H,[Object(a["d"])("div",M,[Object(a["f"])(l,{linea1:o.sensorHumedadSuelo+"%",linea2:"HUMEDAD DEL SUELO",imagen:"humedad-suelo"},null,8,["linea1"])]),Object(a["d"])("div",T,[Object(a["f"])(l,{linea1:o.sensorTemperaturaAmbiente+"掳",linea2:"T掳 AMBIENTAL",imagen:"temperatura-ambiente"},null,8,["linea1"])]),Object(a["d"])("div",U,[Object(a["f"])(l,{linea1:o.sensorHumedadAmbiente+"掳",linea2:"HUMEDAD AMBIENTAL",imagen:"humedad-ambiente"},null,8,["linea1"])])])])])])])])}var I=n("3835"),P=(n("ac1f"),n("1276"),n("99af"),n("159b"),n("260b")),R=(n("ea7b"),n("e71f"),{apiKey:"AIzaSyD0XCA5pL5swZE38N_XHT_JJT1Uc_OeIyg",authDomain:"fir-inv-72799.firebaseapp.com",databaseURL:"https://fir-inv-72799-default-rtdb.firebaseio.com",projectId:"fir-inv-72799",storageBucket:"fir-inv-72799.appspot.com",messagingSenderId:"213323648848",appId:"1:213323648848:web:5318a93dc667f0c10ba655"}),N=P["a"].initializeApp(R),C=N.firestore(),J=N.auth(),G=new P["a"].auth.GoogleAuthProvider,W={class:"row widgetsRight shadow rounded mb-md-4 py-md-2 mx-1 py-2"},q={class:"col-sm-4 my-auto px-0"},B=["src"],Y={class:"col-sm-8 pl-sm-0"},X={class:"linea1 mb-0 h4 font-weight-bold mx-auto text-center"},Z={class:"linea2 d-none d-sm-block text-center"},K={class:"text-monospace"};function $(e,t,n,r,o,c){return Object(a["p"])(),Object(a["c"])("div",W,[Object(a["d"])("div",q,[Object(a["d"])("img",{src:c.imagenUrl,class:"rounded img-fluid mx-auto d-block w-75 imgWidget",alt:"humedad suelo"},null,8,B)]),Object(a["d"])("div",Y,[Object(a["d"])("p",X,Object(a["x"])(n.linea1),1),Object(a["d"])("p",Z,[Object(a["d"])("small",K,Object(a["x"])(n.linea2),1)])])])}var Q={name:"sensor-widget",props:["linea1","linea2","imagen"],data:function(){return{imgHumedadSuelo:n("6b21"),imgHumedadAmbiente:n("8cab"),imgTempAmbiente:n("fd30")}},computed:{imagenUrl:function(){switch(this.imagen){case"humedad-suelo":return this.imgHumedadSuelo;case"temp-ambiente":return this.imgTempAmbiente;case"humedad-ambiente":return this.imgHumedadAmbiente;default:return this.imgTempAmbiente}}},mounted:function(){}};n("c930");Q.render=$;var V=Q,ee={class:"row widgetsLeft mb-md-4 mt-md-5 pb-md-4 pt-md-4 text-center"},te={class:"col-sm-12 p-0"},ne={class:"linea1 m-0 h4"},ae={class:"col-sm-12 p-0"},re={class:"m-0 font-weight-bold"},oe={class:"col-sm-12 p-0"};function ce(e,t,n,r,o,c){return Object(a["p"])(),Object(a["c"])("div",ee,[Object(a["d"])("div",te,[Object(a["d"])("p",ne,[Object(a["d"])("strong",null,Object(a["x"])(n.linea1),1)])]),Object(a["d"])("div",ae,[Object(a["d"])("small",re,Object(a["x"])(n.linea2),1)]),Object(a["d"])("div",oe,[Object(a["d"])("p",{class:Object(a["l"])(["linea3 m-0 font-weight-bold",n.clase])},Object(a["x"])(n.linea3),3)])])}var ie={name:"indicador-widget",props:["linea1","linea2","linea3","clase"],data:function(){return{}},computed:{},mounted:function(){}};n("f820");ie.render=ce;var se=ie,le={class:"row pl-2 mb-4 border-bottom border-dark"},ue={class:"col-sm-12"},de={class:"row"},be={class:"col-6"},pe={class:"font-weight-bolder mb-0 text-dark"},me={class:"col-6"},fe={class:"badge badge-light float-right p-2 text-success"},he={class:"row"},ge={class:"nombre-planta font-weight-bold"};function ve(e,t,n,r,o,c){return Object(a["p"])(),Object(a["c"])("div",le,[Object(a["d"])("div",ue,[Object(a["d"])("div",de,[Object(a["d"])("div",be,[Object(a["d"])("h6",pe,Object(a["x"])(n.banco),1)]),Object(a["d"])("div",me,[Object(a["d"])("h5",null,[Object(a["d"])("span",fe,Object(a["x"])(n.genetica),1)])])]),Object(a["d"])("div",he,[Object(a["d"])("h1",ge,Object(a["x"])(n.nombre),1)])])])}var Oe={name:"header-planta-widget",props:["banco","genetica","nombre"],data:function(){return{}},computed:{},mounted:function(){}};n("3d11");Oe.render=ve;var je=Oe,we={name:"sensores",components:{sensorWidget:V,indicadorWidget:se,headerPlanta:je},data:function(){return{unsubscribeDocument:null,unsubscribeSensores:null,sensorHumedadSuelo:null,sensorTemperaturaAmbiente:null,sensorHumedadAmbiente:null,sensorLuz:null,sensorLuzFecha:null,plantaData:{nombre:null,tipo:null,tipo_planta:null,banco:null,fecha_germinacion:null}}},computed:{tiempo_luz:function(){if(!this.sensorLuzFecha)return"-";console.log("Computed, sensorLuzFecha: "+this.sensorLuzFecha);var e=this.sensorLuzFecha.split(" "),t=Object(I["a"])(e,2),n=t[0],a=t[1],r=n.split("/"),o=Object(I["a"])(r,3),c=o[0],i=o[1],s=o[2],l="".concat(s,"-").concat(i,"-").concat(c,"T").concat(a,":00");console.log("FormattedDateStr: "+l);var u=new Date(l),d=new Date;console.log("SensorLuzFecha: "+u),console.log("Now: "+d);var b=d-u,p=Math.floor(b/36e5),m=Math.floor(b%36e5/6e4);return console.log("DiffMs: "+b),console.log("DiffHrs: "+p),console.log("DiffMins: "+m),"".concat(p,"h ").concat(m,"min")},tiempo_edad_planta:function(){var e=new Date,t=this.plantaData.fecha_germinacion?this.plantaData.fecha_germinacion.toDate():e;e.setHours(0,0,0,0),t.setHours(0,0,0,0);var n=12*(e.getFullYear()-t.getFullYear())+(e.getMonth()-t.getMonth()),a=e.getDate()-t.getDate();if(a<0){n-=1;var r=new Date(e.getFullYear(),e.getMonth(),0);a+=r.getDate()}return"".concat(n,"M y ").concat(a,"d")}},methods:{fetchData:function(){var e=this;try{var t=C.collection("inv-data").doc("Inv-001").collection("maceteros").doc("ma-z01");this.unsubscribeDocument=t.onSnapshot((function(t){t.exists?(console.log("Documento encontrado:",t.data()),e.plantaData=t.data()):console.log("El documento no existe")}),(function(e){console.error("Error al obtener el documento:",e)})),this.unsubscribeSensores=t.collection("sensores").onSnapshot((function(t){t.forEach((function(t){var n=t.data();"humedad-ambiente"==t.id?e.sensorHumedadAmbiente=n.valor:"humedad-suelo"==t.id?e.sensorHumedadSuelo=n.valor:"temperatura-ambiente"==t.id?e.sensorTemperaturaAmbiente=n.valor:"luz"==t.id&&(console.log("======= LUZ ======== "),console.log("itemData: "+JSON.stringify(n)),e.sensorLuz=n.valor,console.log("SensorLuz: "+e.sensorLuz),e.sensorLuzFecha=n.fecha_string,console.log("SensorLuzFecha: "+e.sensorLuzFecha))}))}),(function(e){console.error("Error al obtener la colecci贸n de sensores:",e)}))}catch(n){console.error("Error en fetchData:",n)}}},created:function(){this.fetchData()},mounted:function(){},beforeUnmount:function(){this.unsubscribeDocument&&this.unsubscribeDocument(),this.unsubscribeSensores&&this.unsubscribeSensores()}};n("cfb2");we.render=F;var xe=we,De=Object(a["d"])("h1",null,"Iniciar sesi贸n",-1);function ye(e,t,n,r,o,c){return Object(a["p"])(),Object(a["c"])("div",null,[De,Object(a["d"])("button",{onClick:t[0]||(t[0]=function(){return c.handleLogin&&c.handleLogin.apply(c,arguments)})},"Iniciar sesi贸n con Google")])}function Ae(){return Le.apply(this,arguments)}function Le(){return Le=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.signInWithPopup(G);case 3:return t=e.sent,n=t.user,console.log("Usuario autenticado:",n.email),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e["catch"](0),console.error("Error en la autenticaci贸n con Google:",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),Le.apply(this,arguments)}function Se(e){return _e.apply(this,arguments)}function _e(){return _e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=C.collection("allowedUsers").doc(t),e.next=4,n.get();case 4:if(a=e.sent,!a.exists){e.next=10;break}return console.log("Usuario permitido:",t),e.abrupt("return",!0);case 10:return console.warn("Usuario no permitido:",t),e.abrupt("return",!1);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e["catch"](0),console.error("Error verificando acceso del usuario:",e.t0),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))),_e.apply(this,arguments)}var ke={name:"Login",methods:{handleLogin:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ae();case 3:n=t.sent,console.log("Usuario autenticado:",n.email),e.$router.push("/planta"),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Error durante el inicio de sesi贸n:",t.t0),alert("Error durante el inicio de sesi贸n");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}};ke.render=ye;var ze=ke,Ee=[{path:"/login",name:"Login",component:ze},{path:"/",alias:"/planta",name:"planta",component:xe,meta:{requiresAuth:!0}}],He=Object(v["a"])({history:Object(v["b"])(),routes:Ee});He.beforeEach(function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.matched.some((function(e){return e.meta.requiresAuth})),!r){e.next=13;break}if(o=J.currentUser,o){e.next=7;break}a("/login"),e.next=11;break;case 7:return e.next=9,Se(o.email);case 9:c=e.sent,c?a():(alert("No tienes permiso para acceder a esta p谩gina."),a("/login"));case 11:e.next=14;break;case 13:a();case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}());var Me,Te=He;J.onAuthStateChanged((function(){Me||(Me=Object(a["b"])(h).use(Te).mount("#app"))}))},"5a4e":function(e,t,n){},"6b21":function(e,t,n){e.exports=n.p+"img/humedad-suelo.b2d9fae3.png"},"8cab":function(e,t,n){e.exports=n.p+"img/humedad-ambiente.e313ab16.png"},"9d64":function(e,t,n){e.exports=n.p+"img/logo.9883b65c.png"},a4a8:function(e,t,n){},c930:function(e,t,n){"use strict";n("a4a8")},cfb2:function(e,t,n){"use strict";n("049b")},f31b:function(e,t,n){e.exports=n.p+"img/weed.a905aed7.png"},f820:function(e,t,n){"use strict";n("5a4e")},fd30:function(e,t,n){e.exports=n.p+"img/temperatura-ambiente.f0366525.png"}});
//# sourceMappingURL=app.c3812adf.js.map